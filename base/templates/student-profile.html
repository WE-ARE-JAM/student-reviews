{% extends "staff-header.html" %}

{% block title %}{{ student.name }}{% endblock %}

{% block content %}

<p>Karma score: {{ karma.score }}</p>

<p><a href="#" onClick="document.getElementById('leadership_skill').submit()">Leadership</a> {{ endorsement_stats.leadership }} | School Highest: {{ highest_endorsements.leadership }}</p>
<p><a href="#" onClick="document.getElementById('respect_skill').submit()">Respect</a> {{ endorsement_stats.respect }} | School Highest: {{ highest_endorsements.respect }}</p>
<p><a href="#" onClick="document.getElementById('punctuality_skill').submit()">Punctuality</a> {{ endorsement_stats.punctuality }} | School Highest: {{ highest_endorsements.punctuality }}</p>
<p><a href="#" onClick="document.getElementById('participation_skill').submit()">Participation</a> {{ endorsement_stats.participation }} | School Highest: {{ highest_endorsements.participation }}</p>
<p><a href="#" onClick="document.getElementById('teamwork_skill').submit()">Teamwork</a> {{ endorsement_stats.teamwork }} | School Highest: {{ highest_endorsements.teamwork }}</p>

<form id="leadership_skill" method="POST" action="{% url 'base:endorse' student_name=student.name skill='leadership' %}">
    {% csrf_token %}
    <input type="hidden">
</form>

<form id="respect_skill" method="POST" action="{% url 'base:endorse' student_name=student.name skill='respect' %}">
    {% csrf_token %}
    <input type="hidden">
</form>

<form id="punctuality_skill" method="POST" action="{% url 'base:endorse' student_name=student.name skill='punctuality' %}">
    {% csrf_token %}
    <input type="hidden">
</form>

<form id="participation_skill" method="POST" action="{% url 'base:endorse' student_name=student.name skill='participation' %}">
    {% csrf_token %}
    <input type="hidden">
</form>

<form id="teamwork_skill" method="POST" action="{% url 'base:endorse' student_name=student.name skill='teamwork' %}">
    {% csrf_token %}
    <input type="hidden">
</form>

<a href="{% url 'base:write-review' student.name %}">
    <button type="button" class="btn btn-primary">Write Review</button>
</a>

<button type="button" class="btn btn-primary">Generate Recommendation Letter</button>

{% if reviews %}
    <p>{{ reviews|length }} review(s).</p>
    <ul>
        {% for review in reviews %}
            <div>{{ review }}</div>
            <div>{{ review.stats }}</div>

            <a href="{% url 'base:edit-review' review.id %}">Edit</a>

            <a href="#" onClick="document.getElementById('likebutton').submit()">Upvote</a>   |   <a href="#" onClick="document.getElementById('dislikebutton').submit()">Downvote</a>

            <form id="likebutton" method="POST" action="{% url 'base:vote-review' review_id=review.id vote_value='UP' %}">
                {% csrf_token %}
                <input type="hidden">
            </form>

            <form id="dislikebutton" method="POST" action="{% url 'base:vote-review' review_id=review.id vote_value='DOWN' %}">
                {% csrf_token %}
                <input type="hidden">
            </form>
        {% endfor %}
    </ul>
{% else %}
    <p>No reviews found.</p>
{% endif %}

{% endblock %}